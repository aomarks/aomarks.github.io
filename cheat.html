<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>aomarks / cheatsheet</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
<style>
[hidden] {
  display: none;
}
.prompt::before {
  content: "$ ";
}
#filter {
 position: fixed;
 right: 10px;
 top: 10px;
}
kbd {
  background-color: #e4e4e4;
  padding: 1px 5px;
}
td:first-of-type {
  text-align: right;
}
th > h3 {
  text-align: left;
  font-weight: normal;
  font-size: 18px;
}
article {
  column-width: 300px;
}
section {
  break-inside: avoid;
}
section:last-child() {
  border-bottom: none;
}
ul {
  padding-left: 0;
  display: table;
  border-spacing: 0 8px;
}
li {
  display: table-row;
}
li > * {
  display: table-cell;
}
li > :first-child {
  text-align: right;
}
section {
  margin: 20px;
}
dfn {
  font-style: normal;
  padding-left: 10px;
}
</style>
</head>

<body>
<a href="/">index</a>

<p>Latest update: March 4, 2020</p>

<h2 id="vim"><a href="#vim">Vim</a></h2>
<article>

<section>
<h3>Help</h3>
<ul>
<li item><span><kbd>:h[elp]</kbd></span> <dfn>Top-level help</dfn></li>
<li item><span><kbd>:h[elp] {pattern}</kbd></span> <dfn>Help matching a pattern</dfn></li>
<li item><span><kbd>:helpc[lose]</kbd></span> <dfn>Close one help window</dfn></li>
</ul>
</section>

<section>
<h3>Options</h3>
<ul>
<li item><span><kbd>:se[t]</kbd></span> <dfn>Show all options that differ from default</dfn></li>
<li item><span><kbd>:se[t] {option}?</kbd></span> <dfn>Show value of {option}</dfn></li>
<li item><span><kbd>:se[t] {option}&amp;</kbd></span> <dfn>Reset option to default value</dfn></li>
<li item><span><kbd>:se[t] {option}</kbd></span> <dfn>Set toggle type option to true</dfn></li>
<li item><span><kbd>:se[t] no{option}</kbd></span> <dfn>Set toggle type option to false</dfn></li>
<li item><span><kbd>:se[t] {option}={value}</kbd></span> <dfn>Set string or number type {option} to {value}</dfn></li>
</ul>
</section>

<section>
<h3>Tags</h3>
<ul>
<li item><span><kbd>:ta[g] {tag}</kbd></span> <dfn>Jump to tag {tag}</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>]</kbd></span> <dfn>Jump to tag under cursor</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>T</kbd></span> <dfn>Jump to [count] older tag</dfn></li>
<li item><span><kbd>:[count]ta[g]</kbd></span> <dfn>Jump to [count] newer tag</dfn></li>
<li item><span><kbd>:tags</kbd></span> <dfn>Show tag stack</dfn></li>
</ul>
</section>

<section>
<h3>Files</h3>
<ul>
<li item><span><kbd>:w</kbd></span>   <dfn>Write file</dfn></li>
<li item><span><kbd>:wqa</kbd></span> <dfn>Write all files</dfn></li>
<li item><span><kbd>:q</kbd></span>   <dfn>Quit unless pending changes</dfn></li>
<li item><span><kbd>:q!</kbd></span>  <dfn>Quit and ignore pending changes</dfn></li>
</ul>
</section>

<section>
<h3>Basic navigation</h3>
<ul>
<li item><span><kbd>h</kbd></span> <dfn>Left</dfn></li>
<li item><span><kbd>j</kbd></span> <dfn>Down</dfn></li>
<li item><span><kbd>k</kbd></span> <dfn>Up</dfn></li>
<li item><span><kbd>l</kbd></span> <dfn>Right</dfn></li>
</ul>
</section>

<section>
<h3>Words</h3>
<ul>
<li item><span><kbd>w</kbd></span> <dfn>Start of next word</dfn></li>
<li item><span><kbd>W</kbd></span> <dfn>Start of next word (with punctuation)</dfn></li>
<li item><span><kbd>b</kbd></span> <dfn>Start of last word</dfn></li>
<li item><span><kbd>B</kbd></span> <dfn>Start of last word (with punctuation)</dfn></li>
<li item><span><kbd>e</kbd></span> <dfn>End of next word</dfn></li>
<li item><span><kbd>E</kbd></span> <dfn>End of next word (with punctuation)</dfn></li>
</ul>
</section>

<section>
<h3>Scrolling</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>e</kbd></span> <dfn>Scroll one line down</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>y</kbd></span> <dfn>Scroll one line up</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>d</kbd></span> <dfn>Scroll half screen down</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>u</kbd></span> <dfn>Scroll half screen up</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>f</kbd></span> <dfn>Scroll full screen down</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>b</kbd></span> <dfn>Scroll full screen up</dfn></li>
<li item><span><kbd>zz</kbd></span><dfn>Scroll so that current line is centered</dfn></li>
</ul>
</section>

<section>
<h3>Navigate lines</h3>
<ul>
<li item><span><kbd>0</kbd></span> <dfn>Line start</dfn></li>
<li item><span><kbd>$</kbd></span> <dfn>Line end</dfn></li>
<li item><span><kbd>^</kbd> or <kbd>_</kbd></span> <dfn>First non-blank character of line</dfn></li>
<li item><span><kbd>g_</kbd></span> <dfn>Last non-blank character of line</dfn></li>
<li item><span><kbd>f{char}</kbd></span><dfn>Next occurence of {char}</dfn></li>
<li item><span><kbd>F{char}</kbd></span><dfn>Prev occurence of {char}</dfn></li>
<li item><span><kbd>t{char}</kbd></span><dfn>Next occurence of {char} (place cursor before)</dfn></li>
<li item><span><kbd>T{char}</kbd></span><dfn>Prev occurence of {char} (place cursor before)</dfn></li>
<li item><span><kbd>;</kbd></span><dfn>Repeat last fFtT</dfn></li>
<li item><span><kbd>,</kbd></span><dfn>Repeat last fFtT in reverse</dfn></li>
</ul>
</section>

<section>
<h3>Navigate screen</h3>
<ul>
<li item><span><kbd>H</kbd></span> <dfn>Screen top</dfn></li>
<li item><span><kbd>M</kbd></span> <dfn>Screen middle</dfn></li>
<li item><span><kbd>L</kbd></span> <dfn>Screen bottom</dfn></li>
</ul>
</section>

<section>
<h3>Navigate structurally</h3>
<ul>
<li item><span><kbd>%</kbd></span> <dfn>Jump to matching <code>()</code>, <code>{}</code>, or <code>[]</code> pair</dfn></li>
<li item><span><kbd>}</kbd></span> <dfn>Next paragraph/block</dfn></li>
<li item><span><kbd>{</kbd></span> <dfn>Previous paragraph/block</dfn></li>
</ul>
</section>

<section>
<h3>Navigate file</h3>
<ul>
<li item><span><kbd>gg</kbd></span> <dfn>Start of file</dfn></li>
<li item><span><kbd>G</kbd></span>  <dfn>End of file</dfn></li>
<li item><span><kbd>:n</kbd> or <kbd>nG</kbd></span> <dfn>Line n of file</dfn></li>
</ul>
</section>

<section>
<h3>Copy/Paste</h3>
<ul>
<li item><span><kbd>y</kbd></span>  <dfn>Copy selection</dfn></li>
<li item><span><kbd>yy</kbd> or <kbd>Y</kbd></span> <dfn>Copy current line</dfn></li>
<li item><span><kbd>y$</kbd></span> <dfn>Copy to end of line without newline</dfn></li>
<li item><span><kbd>d</kbd></span>  <dfn>Cut selection</dfn></li>
<li item><span><kbd>dd</kbd></span> <dfn>Cut line</dfn></li>
<li item><span><kbd>D</kbd></span>  <dfn>Cut to end of line</dfn></li>
<li item><span><kbd>p</kbd></span>  <dfn>Paste clipboard after cursor</dfn></li>
<li item><span><kbd>P</kbd></span>  <dfn>Paste clipboard before cursor</dfn></li>
<li item><span><kbd>:pu</kbd></span> <dfn>Paste to new line above</dfn></li>
<li item><span><kbd>:pu!</kbd></span> <dfn>Paste to new line below</dfn></li>
</ul>
</section>

<section>
<h3>Editing lines</h3>
<ul>
<li item><span><kbd>J</kbd></span> <dfn>Join next line to current, with space</dfn></li>
<li item><span><kbd>gJ</kbd></span> <dfn>Join next line to current, without space</dfn></li>
<li item><span><kbd>cc</kbd></span> <dfn>Replace line</dfn></li>
<li item><span><kbd>C</kbd></span> <dfn>Replace to end of line</dfn></li>
<li item><span><kbd>I</kbd></span> <dfn>Insert text at beginning of line</dfn></li>
<li item><span><kbd>A</kbd></span> <dfn>Insert text at end of line</dfn></li>
</ul>
</section>

<section>
<h3>Editing characters</h3>
<ul>
<li item><span><kbd>~</kbd></span> <dfn>Toggle case</dfn></li>
<li item><span><kbd>x</kbd></span> <dfn>Cut character</dfn></li>
<li item><span><kbd>xp</kbd></span> <dfn>Transpose</dfn></li>
</ul>
</section>

<section>
<h3>Undo/Redo</h3>
<ul>
<li item><span><kbd>u</kbd></span> <dfn>Undo</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>r</kbd></span> <dfn>Redo</dfn></li>
</ul>
</section>

<section>
<h3>Search/Replace</h3>
<ul>
<li item><span><kbd>/pattern</kbd></span> <dfn>Search for pattern</dfn></li>
<li item><span><kbd>?pattern</kbd></span> <dfn>Search for pattern backwards</dfn></li>
<li item><span><kbd>n</kbd></span>        <dfn>Next match</dfn></li>
<li item><span><kbd>N</kbd></span>        <dfn>Previous match</dfn></li>
<li item><span><kbd>ggn</kbd></span>      <dfn>First match</dfn></li>
<li item><span><kbd>GN</kbd></span>       <dfn>Last match</dfn></li>
<li item><span><kbd>*</kbd></span>        <dfn>Search for word under cursor</dfn></li>
<li item><span><kbd>g*</kbd></span>       <dfn>Search for word under cursor (without word boundaries)</dfn></li>
<li item><span><kbd>#</kbd></span>        <dfn>Reverse version of <kbd>*</kbd></dfn></li>
<li item><span><kbd>g$</kbd></span>       <dfn>Reverse version of <kbd>g*</kbd></dfn></li>
</ul>
</section>

<section>
<h3>Selecting (visual mode)</h3>
<ul>
<li item><span><kbd>v</kbd></span> <dfn>Select characters</dfn></li>
<li item><span><kbd>V</kbd></span> <dfn>Select lines</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>v</kbd></span> <dfn>Select columns</dfn></li>
<li item><span><kbd>gv</kbd></span> <dfn>Select previous range</dfn></li>
</ul>
</section>

<section>
<h3>Macros</h3>
<ul>
<li item><span><kbd>q{letter}</kbd></span>           <dfn>Start recording to register {letter}</dfn></li>
<li item><span><kbd>q</kbd></span>                   <dfn>Stop recording</dfn></li>
<li item><span><kbd>{number}@{letter}</kbd></span>   <dfn>Play macro {letter}, {number} times</dfn></li>
<li item><span><kbd>{number}@@</kbd></span>          <dfn>Play previously played macro</dfn></li>
<li item><span><kbd>:norm[al] @{letter}</kbd></span> <dfn>Play macro {letter} on all lines in selection</dfn></li>
<li item><span><kbd>:reg[isters] 1a</kbd></span>     <dfn>Show contents of register 1 and a</dfn></li>
</ul>
</section>

<section>
<h3>VSCodeVim</h3>
<ul>
<li item><span><kbd>gd</kbd></span> <dfn>Jump to definition</dfn></li>
<li item><span><kbd>gh</kbd></span> <dfn>Show mouse-hover tooltip at cursor</dfn></li>
</ul>
</section>

<section>
<h3>Registers</h3>
<ul>
<li item><span><kbd>:reg[isters]</kbd></span> <dfn>Show all registers</dfn></li>
<li item><span><kbd>"</kbd></span>      <dfn>Unnamed (most recent yank, delete etc.)</dfn></li>
<li item><span><kbd>+</kbd></span>      <dfn>Clipboard X selection</dfn></li>
<li item><span><kbd>*</kbd></span>      <dfn>Primary X selection</dfn></li>
<li item><span><kbd>a-zA-Z</kbd></span> <dfn>Explicitly referenced registers</dfn></li>
<li item><span><kbd>0</kbd></span>      <dfn>Most recent yank</dfn></li>
<li item><span><kbd>1-9</kbd></span>    <dfn>Most recent deletes and changes (lower is more recent)</dfn></li>
<li item><span><kbd>%</kbd></span>      <dfn>Current file name</dfn></li>
<li item><span><kbd>_</kbd></span>      <dfn>Black hole</dfn></li>
</ul>
</section>

</article>

<h2><a id="i3" href="#i3">i3</a></h2>
<article>

<section>
<h3>Focus window</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>h</kbd></span> <dfn>Focus left</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>j</kbd></span> <dfn>Focus down</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>k</kbd></span> <dfn>Focus up</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>l</kbd></span> <dfn>Focus right</dfn></li>
</ul>
</section>

<section>
<h3>Move window</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>h</kbd></span> <dfn>Move left</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>j</kbd></span> <dfn>Move down</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>k</kbd></span> <dfn>Move up</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>l</kbd></span> <dfn>Move right</dfn></li>
</ul>
</section>

<section>
<h3>Resize window</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Right Click</kbd> + <kbd>Drag</kbd></span> <dfn>Resize</dfn></li>

<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>k</kbd></span> <dfn>Move top edge up</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>j</kbd></span> <dfn>Move top edge down</dfn></li>

<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>l</kbd></span> <dfn>Move right edge right</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>h</kbd></span> <dfn>Move right edge left</dfn></li>

<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>k</kbd></span> <dfn>Move bottom edge up</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>j</kbd></span> <dfn>Move bottom edge down</dfn></li>

<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>h</kbd></span> <dfn>Move left edge right</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>l</kbd></span> <dfn>Move left edge left</dfn></li>
</ul>
</section>

<section>
<h3>Workspaces</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>0-9</kbd></span> <dfn>Switch to workspace</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>0-9</kbd></span> <dfn>Move window to workspace</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>r</kbd></span> <dfn>Rename workspace</dfn></li>
</ul>
</section>

<section>
<h3>Layout</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>e</kbd></span> <dfn>Tiled layout (default)</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>s</kbd></span> <dfn>Stacked layout</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>w</kbd></span> <dfn>Tabbed layout</dfn></li>
</ul>
</section>

<section>
<h3>Fullscreen</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>f</kbd></span> <dfn>Toggle fullscreen</dfn></li>
</ul>
</section>

<section>
<h3>Floating</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>Space</kbd></span> <dfn>Toggle window floating</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Space</kbd></span> <dfn>Toggle between floating/tiled layers</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>p</kbd></span> <dfn>Toggle sticky</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Drag</kbd></span> <dfn>Move floating window</dfn></li>
</ul>
</section>

<section>
<h3>Container splitting</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>v</kbd></span> <dfn>Split vertically</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>b</kbd></span> <dfn>Split horizontally</dfn></li>
</ul>
</section>

<section>
<h3>Container focus</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>a</kbd></span> <dfn>Focus parent container</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>a</kbd></span> <dfn>Focus child container</dfn></li>
</ul>
</section>

<section>
<h3>Kill window</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>q</kbd></span> <dfn>Kill window</dfn></li>
</ul>
</section>

<section>
<h3>Launching apps</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>d</kbd></span> <dfn>Open dmenu launcher</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Enter</kbd></span> <dfn>Open a terminal</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>c</kbd></span> <dfn>Open a browser</dfn></li>
</ul>
</section>

<section>
<h3>Scratchpad</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>Backslash</kbd></span> <dfn>Move to scratchpad</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Backslash</kbd></span> <dfn>Cycle through scratchpad windows</dfn></li>
</ul>
</section>

<section>
<h3>Special scratchpad windows</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>?</kbd></span> <dfn>Toggle cheat sheet</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>m</kbd></span> <dfn>Toggle music player</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>y</kbd></span> <dfn>Toggle YouTube player</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>`</kbd></span> <dfn>Toggle terminal</dfn></li>
</ul>
</section>

<section>
<h3>Screenshot</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>s</kbd></span> <dfn>Draw region and screenshot to clipboard</dfn></li>
</ul>
</section>

<section>
<h3>Reload/Restart/Exit i3</h3>
<ul>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>c</kbd></span> <dfn>Reload config file</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>r</kbd></span> <dfn>Restart i3</dfn></li>
<li item><span><kbd>Super</kbd> + <kbd>Shift</kbd> + <kbd>e</kbd></span> <dfn>Exit i3</dfn></li>
</ul>
</section>
</article>

<h2><a id="urxvt" href="#urxvt">urxvt</a></h2>
<article>

<section>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>c</kbd></span> <dfn>Copy to clipboard</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>v</kbd></span> <dfn>Paste from clipboard</dfn></li>
<li item><span><kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>Drag</kbd></span> <dfn>Rectangular selection</dfn></li>
<li item><span><kbd>Alt</kbd> + <kbd>s</kbd></span> <dfn>Search scrollback</dfn></li>
</ul>
</section>
</article>

<h2><a id="chrome" href="#chrome">Chrome</a></h2>
<article>

<section>
<h3>Dev tools</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>j</kbd></span> <dfn>Toggle devtools</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>f</kbd></span> <dfn>Search all resources</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>c</kbd></span> <dfn>Inspect element</dfn></li>
</ul>
</section>

<section>
<h3>Debugger</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>\</kbd></span> <dfn>Pause/resume</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>'</kbd></span> <dfn>Step over</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>;</kbd></span> <dfn>Step into</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>;</kbd></span> <dfn>Step out</dfn></li>
</ul>
</section>

<section>
<h3>Tabs</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>Tab</kbd> or <kbd>Ctrl</kbd> + <kbd>Page Up</kbd></span> <dfn>Next tab</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Tab</kbd> or <kbd>Ctrl</kbd> + <kbd>Page Down</kbd></span> <dfn>Previous tab</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>t</kbd></span> <dfn>Re-open last closed tab</dfn></li>
</ul>
</section>

<section>
<h3>URL and Search</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>l</kbd></span> <dfn>Jump to address bar (URL)</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>e</kbd></span> <dfn>Jump to address bar (search)</dfn></li>
<li item><span><kbd>Alt</kbd> + <kbd>Enter</kbd></span> <dfn>Open URL/search in new tab</dfn></li>
<li item><span><kbd>Shift</kbd> + <kbd>Delete</kbd></span> <dfn>Delete highlighted suggestion</dfn></li>
</ul>
</section>

<section>
<h3>Misc</h3>
<ul>
<li item><span><kbd>Alt</kbd> + <kbd>f</kbd></span> <dfn>Open Chrome menu</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>h</kbd></span> <dfn>History</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>j</kbd></span> <dfn>Downloads</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>u</kbd></span> <dfn>View source</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>0</kbd></span> <dfn>Reset zoom</dfn></li>
</ul>
</section>

<section>
<h3>Bookmarks</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>d</kbd></span> <dfn>Bookmark page</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>o</kbd></span> <dfn>Bookmarks browser</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>b</kbd></span> <dfn>Toggle bookmarks bar</dfn></li>
</ul>
</section>

<section>
<h3>Find on page</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>f</kbd></span> <dfn>Find on page page</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>g</kbd></span> <dfn>Next match</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>g</kbd></span> <dfn>Previous match</dfn></li>
</ul>
</section>

<section>
<h3>Links</h3>
<ul>
<li item><span><kbd>Ctrl</kbd> + <kbd>Left Click</kbd></span> <dfn>Open link in new tab</dfn></li>
<li item><span><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Left Click</kbd></span> <dfn>Open link in new tab and open it</dfn></li>
</ul>
</section>

<section>
<h3>Back/Forward</h3>
<ul>
<li item><span><kbd>Alt</kbd> + <kbd>Left Arrow</kbd></span> <dfn>Back</dfn></li>
<li item><span><kbd>Alt</kbd> + <kbd>Right Arrow</kbd></span> <dfn>Forward</dfn></li>
</ul>
</section>

</article>

<input id="filter" placeholder="filter"></input>

<script>
const show = (node) => node.removeAttribute('hidden');
const hide = (node) => node.setAttribute('hidden', '');
const headingLevel = (heading) => Number(heading.localName[1]);
const normalize = (text) => text.trim().toLowerCase();
const tokenize = (text) => text.split(/\W+/).filter((token) => token !== '');

const filter = (term) => {
  const tokens = tokenize(normalize(term));
  const matchStrings = [];

  const matches = () => {
    for (const token of tokens) {
      let found = false;
      for (const str of matchStrings) {
        if (str.includes(token)) {
          found = true;
          break;
        }
      }
      if (found === false) {
        return false;
      }
    }
    return true;
  };

  const walker =
      document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT);
  const headingStack = [];
  const matchStack = [];

  // A heading is visible if any are true:
  //
  // (A1) Any of its ancestor headings already matched.
  // (A2) The concatenation of its text and all ancestor heading text include
  //      all tokens.
  // (A3) Any of its descendant headings matched.
  // (A4) Any of its descendant items matched.
  //
  // An item is visible if any are true:
  //
  // (B1) Any of its ancestor headings already matched.
  // (B2) The concatenation of its text and all ancestor heading text include
  //      all tokens.
  while(walker.nextNode()) {
    const node = walker.currentNode;
    if (node instanceof HTMLHeadingElement) {
      const level = headingLevel(node);
      for (let i = headingStack.length - 1;
           i >= 0 && level <= headingLevel(headingStack[i]); i--) {
        headingStack.pop();
        matchStrings.pop();
        matchStack.pop();
      }
      matchStrings.push(normalize(node.textContent));

      if (matchStack[matchStack.length - 1] === true) {
        show(node); // (A1)
        matchStack.push(true);
      } else if (matches() === true) {
        show(node); // (A2)
        matchStack.push(true);
        for (let ancestor of headingStack) {
          show(ancestor); // (A3)
        }
      } else {
        hide(node);
        matchStack.push(false);
      }

      headingStack.push(node);

    } else if (node.hasAttribute('item')) {
      if (matchStack[matchStack.length - 1] === true) {
        show(node); // (B1)
      } else {
        matchStrings.push(normalize(node.textContent));
        if (matches() === true) {
          show(node); // (B2)
          for (let ancestor of headingStack) {
            show(ancestor); // (A4)
          }
        } else {
          hide(node);
        }
        matchStrings.pop();
      }
    }
  }
};

const input = document.querySelector('#filter');
const url = new URL(document.URL);
const params = url.searchParams;
const term = params.get('q');

if (term) {
  input.value = term;
  filter(term);
}

input.addEventListener('input', () => {
  filter(input.value);
});

document.addEventListener('keydown', (ev) => {
  if (ev.key === 'Escape') {
    input.value = '';
    filter('');
  }
  input.focus();
});

input.focus();
</script>

</body>
</html>
